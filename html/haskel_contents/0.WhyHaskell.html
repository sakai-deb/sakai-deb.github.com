
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>なぜ Haskell を使うのか? &mdash; LinuxとHaskell</title>
    
    <link rel="stylesheet" href="../_static/main.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="LinuxとHaskell" href="../index.html" />
    <link rel="up" title="Study Haskell!!" href="../Study_Haskell.html" />
    <link rel="next" title="クイックソート" href="1.QuickSort.html" />
    <link rel="prev" title="Study Haskell!!" href="../Study_Haskell.html" /> 
  </head>
  <body>
<div id="header">
  <div id="globalnavi">
    <ul>
      <li><a href="../index.html">Main</a></li>
      <li><a href="../aboutus/aboutus.html">About</a></li>
      <li><a href="../references/refs.html">References</a></li>
    </ul>
  </div>
  <div id="titledesign">
<link href='http://fonts.googleapis.com/css?family=Bad+Script' rel='stylesheet' type='text/css'>
    <h1><a href="../index.html">Study Haskell</a></h1>
  </div>
</div>





    <div class="document">
 <div id="document">
  <div class="section" id="haskell">
<span id="index-0"></span><h1>なぜ Haskell を使うのか?</h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">date:</th><td class="field-body">2012/10/15</td>
</tr>
</tbody>
</table>
<p>このページは私が個人的に思ったことを書いていくため、時々内容が変わります。
注意点としては、私は他の関数型言語どころか、他のどの言語についてもほとんど知りません。</p>
<hr class="docutils" />
<div class="contents local topic" id="id1">
<p class="topic-title first">目次</p>
<ul class="simple">
<li><a class="reference internal" href="#id2" id="id18">0. 参考文献</a></li>
<li><a class="reference internal" href="#id4" id="id19">1. 色々書く前に...</a><ul>
<li><a class="reference internal" href="#id5" id="id20">1.1 分類の基準</a></li>
<li><a class="reference internal" href="#id6" id="id21">1.2 分類の例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7" id="id22">2. Haskell の特徴</a><ul>
<li><a class="reference internal" href="#id8" id="id23">2.1 静的型付け</a></li>
<li><a class="reference internal" href="#id9" id="id24">2.2 遅延評価</a></li>
<li><a class="reference internal" href="#id14" id="id25">2.3 純粋関数型</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id1">0. 参考文献</a></h2>
<p><a class="reference external" href="http://www.sampou.org/haskell/article/whyfp.html">なぜ関数プログラミングは重要か</a></p>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id1">1. 色々書く前に...</a></h2>
<p>プログラミング言語には、どんな種類があるでしょうか。調べてみました。
分類の基準については、 <a class="reference external" href="http://itpro.nikkeibp.co.jp/members/NBY/techsquare/20031224/3/">まつもとゆきひろの「プログラミング言語論」[前編](3):IT Pro</a> を参考にしています。</p>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id1">1.1 分類の基準</a></h3>
<p>ここに述べるものはあくまで&#8221;分けるとすれば&#8221;程度のもので、明確にわけられるわけではありません。あくまでおおざっぱなものです。</p>
<ul>
<li><div class="first line-block">
<div class="line">低級言語か, 高級言語か:</div>
<div class="line">- 低級言語 : マシン語とアセンブリ</div>
<div class="line">- 高級言語 : 低級言語以外</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">スタイル: 明確に分けられない</div>
<div class="line">- 手続き型         : 実行すべき手順そのものを書く。</div>
<div class="line">- 関数型           : (手続き型言語の意味でない、数学の意味の)関数を書く。</div>
<div class="line">- 論理型           : 述語論理。Predicate, Fact, Rule, query などを書く。</div>
<div class="line">- オブジェクト指向 : オブジェクト(データと手続きを組みにしたもの)のメッセージによって全体を書く。</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">型付け: ここでは強弱は忘れる</div>
<div class="line">- 型がない   : 型なんてなかった。</div>
<div class="line">- 動的型付け : 実行時に決めよう。</div>
<div class="line">- 静的型付け : コンパイル時点で型が決まっているべき。</div>
</div>
</li>
</ul>
</div>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id1">1.2 分類の例</a></h3>
<div class="line-block">
<div class="line">Wikipedia, 言語ごとのサイトの説明, 伝聞などから作りました。</div>
<div class="line">スタイルについては、勝手に決めたものがあります。(バージョンに依存しているもの, マルチパラダイムな言語など。)</div>
<div class="line">また、型の強弱、関数型でも純粋かどうかなどは、ここでは忘れます。</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="14%" />
<col width="23%" />
<col width="14%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">型付け:スタイル</th>
<th class="head">手続き型</th>
<th class="head">関数型</th>
<th class="head">論理型</th>
<th class="head">オブジェクト指向</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>型がない</td>
<td>&nbsp;</td>
<td>Lazy K,Unlambda</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>動的型付け</td>
<td>BASIC(?)</td>
<td>LISP,Scheme,
Erlang</td>
<td>Prolog,
PARLOG</td>
<td>Perl,Ruby,PHP,
Python,JavaScript</td>
</tr>
<tr class="row-even"><td>静的型付け</td>
<td>C,ALGOL,
Pascal</td>
<td><strong>Haskell</strong>,F#,
Ocaml, Scala</td>
<td>&nbsp;</td>
<td>COBOL,FORTRAN,
Java,C#,D</td>
</tr>
</tbody>
</table>
<p>調査不足で空欄がたくさんありますが、許してください。</p>
</div>
</div>
<div class="section" id="id7">
<h2><a class="toc-backref" href="#id1">2. Haskell の特徴</a></h2>
<p>さて、 Haskell の特徴について考えていきましょう。
良く言われることとして以下のことがあります。</p>
<ul>
<li><div class="first line-block">
<div class="line">静的な型付け</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">遅延評価</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">純粋関数型 or 参照透明性 or 副作用がない</div>
</div>
</li>
</ul>
<p>以下では、それぞれがどういう意味なのか、具体例をまじえて見ていくことにします。</p>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id1">2.1 静的型付け</a></h3>
<div class="line-block">
<div class="line">型とは、あるデータ(関数, 変数, 定数, etc..)がどのように扱われるべきか、を表すものです。</div>
<div class="line">静的型付けを行うことで、コンパイル時に型が異なるようなエラーについては発見できることになります。</div>
</div>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id1">2.2 遅延評価</a></h3>
<p><strong>遅延評価</strong> とは、式の評価をできる限り必要になるまで放置する、というものです。</p>
<p>これは非常に強力です。特に、無限リストを簡単に書くことができます。</p>
<div class="section" id="id10">
<h4>例1. 無限リスト1 : 1,1,...</h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">ones</span> <span class="ow">=</span> <span class="mi">1</span><span class="kt">:</span><span class="n">ones</span>
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h4>例2. 無限リスト2 : 2,4,6,8,10,...</h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="o">..</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id12">
<h4>例3. 2つの無限リストの各要素の和 :</h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">zipWith</span> <span class="p">(</span><span class="o">+</span><span class="p">)</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="o">..</span><span class="p">]</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="o">..</span><span class="p">]</span>
</pre></div>
</div>
<p>これは、２つのリストの要素を、それぞれ足して無限リストを返しています。</p>
</div>
<div class="section" id="id13">
<h4>例4. 無限リストの評価</h4>
<p>これらのリストを実際に使う場合にはどうなるのでしょうか。</p>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">take</span> <span class="mi">3</span> <span class="n">ones</span> <span class="c1">-- ones の3番目までの要素を返す</span>
</pre></div>
</div>
<p>これを実行すると、次のようになる(ハズ。ホントのことはまだわかってない)。</p>
<div class="highlight-python"><pre>take 3 ones
= take 3 (1:ones)
= take 3 (1:(1:ones))
= take 3 (1:(1:(1:ones))) &lt;- 3番目までの要素がわかった
= 1                       &lt;- 値を返す</pre>
</div>
<p>普通、プログラミングでは&#8221;有限のデータと有限の操作&#8221;しか扱えません。
しかし、遅延評価という仕組みによって、擬似的に無限のデータを作っているわけです。</p>
<p>すごい Haskell!!</p>
</div>
</div>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id1">2.3 純粋関数型</a></h3>
<div class="line-block">
<div class="line">Haskell では、 <em>&#8220;関数を引数に適用すること&#8221;</em> がプログラミングです。</div>
<div class="line">ここで言う <em>関数</em> とは、</div>
</div>
<div class="highlight-python"><pre>同じ引数を与えれば、必ず同じ値を返すもの</pre>
</div>
<p>関数を『プログラム中のどの場所、どのタイミングで実行しても同じ結果』が返るということから、 <strong>参照透明性</strong> と言われます。</p>
<p>ここで、関数の例を上げてみましょう。</p>
<div class="section" id="succ-1">
<h4>例1. succ : 1を足す</h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">succ</span> <span class="mi">1</span>
</pre></div>
</div>
<p>1+1 つまり結果は 2</p>
</div>
<div class="section" id="id15">
<h4>例2. 名前 : 引数を取らない関数</h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">language</span> <span class="ow">=</span> <span class="s">&quot;Haskell!!&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id16">
<h4>例3. 少し複雑な関数 : 100 より大きい数を2倍する</h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">doubleNumber</span> <span class="n">x</span> <span class="ow">=</span> <span class="kr">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="kr">then</span> <span class="n">x</span> <span class="kr">else</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Haskell では if...then...else... も値を必ず返します。つまりelse は省略できません。</div>
</div>
<p>次に、Haskell にとっては関数でないけど、Ruby などでは&#8221;関数&#8221;と呼ばれているものについて、
特に問題だと思われる例を説明しましょう。</p>
</div>
<div class="section" id="id17">
<h4>例. Haskell では関数でない例 : 擬似コード</h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">total</span><span class="kt">:=</span><span class="mi">0</span>
<span class="nf">not_Function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="ow">=</span><span class="p">{</span>
   <span class="n">count</span> <span class="kt">:=</span> <span class="mi">0</span>
   <span class="n">repeat</span>
      <span class="n">count</span> <span class="kt">:=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
      <span class="n">total</span> <span class="kt">:=</span> <span class="n">total</span> <span class="o">+</span> <span class="n">count</span>
   <span class="n">until</span>
      <span class="n">count</span> <span class="ow">=</span> <span class="n">x</span>

   <span class="n">return</span> <span class="n">total</span>
   <span class="p">}</span>
</pre></div>
</div>
<p>さて、この not_Function は非常に重大な問題のある&#8221;関数&#8221;です。
それは not_Function を呼び出すタイミングで結果が変わってしまうことです。
例えば、</p>
<div class="highlight-python"><pre>not_Function(2) &lt;- 結果は total=3
...             &lt;- なんか複雑な処理
not_Function(2) &lt;- 結果は total=6 : どうして結果が変わるか考えてみてください</pre>
</div>
<div class="line-block">
<div class="line">これは非常に悩ましいことです。</div>
<div class="line">プログラミングするときには、大規模なプログラムや、複数人でのプログラミングの際に、他の人が関数を使ったかどうかを気にしないといけないのでしょうか?</div>
</div>
<div class="line-block">
<div class="line">not_Function は、数学的には引数が1個の関数ではなく、明示的に引数として与えていない変数 total にも依存しています。このことが、同じ引数を与えても異なる結果になる原因です。</div>
<div class="line">もちろん、次のように修正すべきという人もいるでしょう。</div>
</div>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">not_Function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="ow">=</span><span class="p">{</span>
<span class="hll">   <span class="n">total</span> <span class="kt">:=</span> <span class="mi">0</span>
</span>   <span class="n">count</span> <span class="kt">:=</span> <span class="mi">0</span>
   <span class="n">repeat</span>
      <span class="n">count</span> <span class="kt">:=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
      <span class="n">total</span> <span class="kt">:=</span> <span class="n">total</span> <span class="o">+</span> <span class="n">count</span>
   <span class="n">until</span>
      <span class="n">count</span> <span class="ow">=</span> <span class="n">x</span>

   <span class="n">return</span> <span class="n">total</span>
   <span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">これを必ず、誰もが、巨大なプログラムの最中でできるならやっても良いと思います。</div>
<div class="line">(それが容易でないから、オブジェクト指向が流行ったんだと理解しています。)</div>
<div class="line">オブジェクト指向にしようが手続き型にしようが、変数という状態を変更してプログラミングをします。</div>
<div class="line"><br /></div>
<div class="line">そもそも、 <em>&#8220;変数を変更してプログラミングすること自体をやめよう、そうすれば参照透明だよ！&#8221;</em> 、というアイデアが関数型であり、Haskell なんだと思います。</div>
<div class="line">(その分色んなトリックが必要になると思います。例えば、データベースに読み書きする、といった操作は順番に依存してしまいそうです。)</div>
</div>
</div>
</div>
</div>
</div>


 </div>
<div id="sidebar">
  <div id="sidelinks">
    <h3>Links</h3>
    <ul>
      <li><a href="http://sphinx-users.jp/">Sphinx-Users.jp</a></li>
      <li><a href="http://www.haskell.org/haskellwiki/Haskell">HaskellWiki</a></li>
      <li><a href="http://hackage.haskell.org/packages/hackage.html">hackageDB</a></li>
    </ul>
  </div>
  <div id="recentpost">
  </div>
</div>

      <div class="clearer"></div>
    </div>
<div id="related">
  <ul class="link">
    
      <li><a href="../Study_Haskell.html">Prev</a></li>
    
    
      <li><a href="1.QuickSort.html">Next</a></li>
    
    <li><a href="../genindex.html">Index</a></li>
  </ul>
</div>

<div id="footer">
  &copy;copyright:2011-2012, sakai <br />
  Last update: Oct 28, 2012 <br />
  Created using Sphinx 1.1.3
</div>

  </body>
</html>