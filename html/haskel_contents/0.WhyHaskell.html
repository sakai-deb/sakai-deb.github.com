
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>なぜ Haskell を使うのか? &mdash; memo : Linuxとかプログラミングとか</title>
    
    <link rel="stylesheet" href="../static/main.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../static/translations.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="memo : Linuxとかプログラミングとか" href="../index.html" />
    <link rel="up" title="Study Haskell!!" href="../Study_Haskell.html" />
    <link rel="next" title="雑記" href="../Others.html" />
    <link rel="prev" title="Study Haskell!!" href="../Study_Haskell.html" /> 
  </head>
  <body>
<div id="header">
  <div id="globalnavi">
    <ul>
      <li><a href="../index.html">Main</a></li>
      <li><a href="../aboutus/aboutus.html">About</a></li>
    </ul>
  </div>
</div>

<!--
    <div class="related">
        <li><a href="#">memo : Linuxとかプログラミングとか</a> &raquo;</li> 
    </div>
-->
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="haskell">
<h1>なぜ Haskell を使うのか?<a class="headerlink" href="#haskell" title="このヘッドラインへのパーマリンク">¶</a></h1>
<table class="docutils field-list" frame="void" id="index-0" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">date:</th><td class="field-body">October 07, 2012</td>
</tr>
</tbody>
</table>
<p>このページは私が個人的に思ったことを書いていくため、時々内容が変わります。
注意点としては、私は他の関数型言語どころか、他のどの言語についてもほとんど知りません。</p>
<hr class="docutils" />
<div class="contents local topic" id="id1">
<p class="topic-title first">目次</p>
<ul class="simple">
<li><a class="reference internal" href="#id2" id="id18">0. 参考文献</a></li>
<li><a class="reference internal" href="#id4" id="id19">1. 色々書く前に...</a><ul>
<li><a class="reference internal" href="#id5" id="id20">1.1 分類の基準</a></li>
<li><a class="reference internal" href="#id6" id="id21">1.2 分類の例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hakell" id="id22">2. Hakell の特徴</a><ul>
<li><a class="reference internal" href="#id7" id="id23">2.1 遅延評価</a></li>
<li><a class="reference internal" href="#id12" id="id24">2.2 純粋関数型</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2>0. 参考文献<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference external" href="http://www.sampou.org/haskell/article/whyfp.html">なぜ関数プログラミングは重要か</a></p>
</div>
<div class="section" id="id4">
<h2>1. 色々書く前に...<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>プログラミング言語とは、どんな種類があるでしょうか。調べて見ました。
分類の基準については、 <a class="reference external" href="http://itpro.nikkeibp.co.jp/members/NBY/techsquare/20031224/3/">まつもとゆきひろの「プログラミング言語論」[前編](3):IT Pro</a> を参考にしています。</p>
<div class="section" id="id5">
<h3>1.1 分類の基準<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ここに述べるものはあくまで&#8221;分けるとすれば&#8221;程度のもので、明確にわけられるわけではありません。あくまでおおざっぱなものです。
(特に処理系の性質を言語の分類に使うのはどうなのか、という話があると思います。)</p>
<ul>
<li><div class="first line-block">
<div class="line">低級言語か, 高級言語か:</div>
<div class="line">- 低級言語 : マシン語とアセンブリ</div>
<div class="line">- 高級言語 : 低級言語以外</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">処理系の性質:</div>
<div class="line">- コンパイル型   : プログラムを一度機械語に変換した後に実行する (コンパイルした方が早い派)</div>
<div class="line">- 中間言語       : プログラムを一度別の言語に変換する。 (他の言語に任せよう派)</div>
<div class="line">- インタプリタ型 : プログラムを逐次解釈して実行する (コンパイルめんどくさい派)</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">スタイル: そんなに明確に分けられない</div>
<div class="line">- 手続き型         : 実行すべき手順そのものを書く。</div>
<div class="line">- 関数型           : (手続き型言語の意味でない、数学の意味の)関数を書く。</div>
<div class="line">- 論理型           : 述語論理。Predicate, Fact, Rule, query などを書く。</div>
<div class="line">- オブジェクト指向 : オブジェクト(データと手続きを組みにしたもの)のメッセージによって全体を書く。</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">型付け: ここでは強弱は忘れる</div>
<div class="line">- 型がない   : 型なんてなかった。</div>
<div class="line">- 動的型付け : 実行時に決めよう。</div>
<div class="line">- 静的型付け : コンパイル時点で型が決まっているべき。</div>
</div>
</li>
</ul>
</div>
<div class="section" id="id6">
<h3>1.2 分類の例<a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="line-block">
<div class="line">Wikipedia, 言語ごとのサイトの説明, 伝聞などから作りました。</div>
<div class="line">スタイルについては、勝手に決めたものがあります。(バージョンに依存しているもの, マルチパラダイムな言語など。)</div>
<div class="line">また、型の強弱、関数型でも純粋かどうか、などあるらしいですが、ここでは忘れます。</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="14%" />
<col width="23%" />
<col width="14%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">型付け:スタイル</th>
<th class="head">手続き型</th>
<th class="head">関数型</th>
<th class="head">論理型</th>
<th class="head">オブジェクト指向</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>型がない</td>
<td>&nbsp;</td>
<td>Lazy K,Unlambda</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>動的型付け</td>
<td>BASIC(?)</td>
<td>LISP,Scheme,
Erlang</td>
<td>Prolog,
PARLOG</td>
<td>Perl,Ruby,PHP,
Python,JavaScript</td>
</tr>
<tr class="row-even"><td>静的型付け</td>
<td>C,ALGOL,
Pascal</td>
<td><strong>Haskell</strong>,F#,
Ocaml, Scala</td>
<td>&nbsp;</td>
<td>COBOL,FORTRAN,
Java,C#,D</td>
</tr>
</tbody>
</table>
<p>調査不足で空欄がたくさんありますが、許してください。</p>
<div class="line-block">
<div class="line">また処理系のことについて、いくつかおおざっぱに列挙してみました。</div>
<div class="line">各言語ごとの適当な処理系について分類しています。(処理系内部の実装については考えないことにしています。)</div>
<div class="line">できるだけ上の表に載っていないものを並べてみました。</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>コンパイル型</td>
<td>C, D, Java, Haskell</td>
</tr>
<tr class="row-even"><td>中間言語</td>
<td>Hexe(-&gt;C#,JavaScript,ActionScript), TypeScript(-&gt;JavaScript),
Java,JRuby,Jython(-&gt; Java の仮想マシンのコード)</td>
</tr>
<tr class="row-odd"><td>インタプリタ型</td>
<td>Ruby, Python, JavaScript</td>
</tr>
</tbody>
</table>
<p>処理系については個人的には、あまり重要なことではないので、以下ではあまり気にしないことにします。</p>
</div>
</div>
<div class="section" id="hakell">
<h2>2. Hakell の特徴<a class="headerlink" href="#hakell" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>さて、 Haskell の特徴について考えていきましょう。
良く言われることとして以下のことがあります。</p>
<ul>
<li><div class="first line-block">
<div class="line">遅延評価</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">純粋関数型 or 参照透明性 or 副作用がない</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">高階関数の存在</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">静的な型付け</div>
</div>
</li>
</ul>
<p>以下では、それぞれがどういう意味なのか、具体例をまじえて見ていくことにします。</p>
<div class="section" id="id7">
<h3>2.1 遅延評価<a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>遅延評価</strong> とは、式の評価をできる限り必要になるまで放置する、というものです。</p>
<p>これは非常に強力です。特に、無限リストを簡単に書くことができます。</p>
<div class="section" id="id8">
<h4>例1. 無限リスト1 : 1,1,...<a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">ones</span> <span class="ow">=</span> <span class="mi">1</span><span class="kt">:</span><span class="n">ones</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h4>例2. 無限リスト2 : 2,4,6,8,10,...<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="o">..</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h4>例3. 2つの無限リストの各要素の和 :<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="p">[</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span> <span class="o">|</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="ow">&lt;-</span> <span class="n">zip</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="o">..</span><span class="p">]</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="o">..</span><span class="p">]</span> <span class="p">]</span>
</pre></div>
</div>
<p>これは、２つのリストの要素を、前から順に足して無限リストを返しています。</p>
</div>
<div class="section" id="id11">
<h4>例4. 無限リストの評価<a class="headerlink" href="#id11" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>これらのリストを実際に使う場合にはどうなるのでしょうか。</p>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">take</span> <span class="mi">3</span> <span class="n">ones</span> <span class="c1">-- ones の3番目までの要素を返す</span>
</pre></div>
</div>
<p>これを実行すると、次のようになる(ハズ。ホントのことはまだわかってない)。</p>
<div class="highlight-python"><pre>take 3 ones
= take 3 (1:ones)
= take 3 (1:(1:ones))
= take 3 (1:(1:(1:ones))) &lt;- 3番目までの要素がわかった
= 1                       &lt;- 値を返す</pre>
</div>
<p>普通、プログラミングでは&#8221;有限のデータと有限の操作&#8221;しか扱えません。
しかし、遅延評価という仕組みによって、擬似的に無限のデータを作っているわけです。</p>
<p>すごい Haskell!!</p>
</div>
</div>
<div class="section" id="id12">
<h3>2.2 純粋関数型<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="line-block">
<div class="line">Haskell では、 <em>&#8220;関数を引数に適用すること&#8221;</em> がプログラミングです。</div>
<div class="line">そして、すべてが関数です。(純粋!)</div>
<div class="line">ここで言う <em>関数</em> とは、</div>
</div>
<div class="highlight-python"><pre>同じ引数を与えれば、必ず同じ値を返すもの</pre>
</div>
<p>関数をプログラム中のどの場所、どのタイミングで実行しても同じ結果が返るということで、 <strong>参照透明性</strong> と言われます。</p>
<p>ここで、関数の例を上げてみましょう。</p>
<div class="section" id="succ-1">
<h4>例1. succ : 1を足す<a class="headerlink" href="#succ-1" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">succ</span> <span class="mi">1</span>
</pre></div>
</div>
<p>1+1 つまり結果は 2</p>
</div>
<div class="section" id="id13">
<h4>例2. 名前 : 引数を取らない関数<a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">language</span> <span class="ow">=</span> <span class="s">&quot;Haskell!!&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id14">
<h4>例3. 少し複雑な関数 : 100 より大きい数を2倍する<a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">doubleNumber</span> <span class="n">x</span> <span class="ow">=</span> <span class="kr">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="kr">then</span> <span class="n">x</span> <span class="kr">else</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Haskell では if...then...else... も値を必ず返します。つまりelse は省略できません。</div>
</div>
<p>次に、Haskell にとっては関数でないけど、Ruby などでは&#8221;関数&#8221;と呼ばれているものについて、
特に問題だと思われる例を説明しましょう。</p>
</div>
<div class="section" id="id15">
<h4>例. Haskell では関数でない例 : 擬似コード<a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">total</span><span class="kt">:=</span><span class="mi">0</span>
<span class="nf">not_Function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="ow">=</span><span class="p">{</span>
   <span class="n">count</span> <span class="kt">:=</span> <span class="mi">0</span>
   <span class="n">repeat</span>
      <span class="n">count</span> <span class="kt">:=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
      <span class="n">total</span> <span class="kt">:=</span> <span class="n">total</span> <span class="o">+</span> <span class="n">count</span>
   <span class="n">until</span>
      <span class="n">count</span> <span class="ow">=</span> <span class="n">x</span>

   <span class="n">return</span> <span class="n">total</span>
   <span class="p">}</span>
</pre></div>
</div>
<p>さて、この not_Function は非常に重大な問題のある&#8221;関数&#8221;です。
それは not_Function を呼び出すタイミングで結果が変わってしまうことです。
例えば、</p>
<div class="highlight-python"><pre>not_Function(2) &lt;- 結果は total=3
...             &lt;- なんか複雑な処理
not_Function(2) &lt;- 結果は total=6 : どうして結果が変わるか考えてみてください</pre>
</div>
<div class="line-block">
<div class="line">これは非常に悩ましいことです。</div>
<div class="line">プログラミングするときには、大規模なプログラムや、複数人でのプログラミングの際に、他の人が関数を使ったかどうかを気にしないといけないのでしょうか?</div>
</div>
<div class="line-block">
<div class="line">not_Function は、数学的には引数が1個の関数ではなく、明示的に引数として与えていない変数 total にも依存しています。このことが、同じ引数を与えても異なる結果になる原因です。</div>
<div class="line">もちろん、次のように修正すべきという人もいるでしょう。</div>
</div>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">not_Function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="ow">=</span><span class="p">{</span>
<span class="hll">   <span class="n">total</span> <span class="kt">:=</span> <span class="mi">0</span>
</span>   <span class="n">count</span> <span class="kt">:=</span> <span class="mi">0</span>
   <span class="n">repeat</span>
      <span class="n">count</span> <span class="kt">:=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
      <span class="n">total</span> <span class="kt">:=</span> <span class="n">total</span> <span class="o">+</span> <span class="n">count</span>
   <span class="n">until</span>
      <span class="n">count</span> <span class="ow">=</span> <span class="n">x</span>

   <span class="n">return</span> <span class="n">total</span>
   <span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">これを必ず、誰もが、巨大なプログラムの最中でできるならやっても良いと思います。</div>
<div class="line">(それが容易でないから、オブジェクト指向が流行ったんだと理解しています。)</div>
<div class="line">オブジェクト指向にしようが手続き型にしようが、変数という状態を変更してプログラミングをします。</div>
<div class="line"><br /></div>
<div class="line">そもそも、 <em>&#8220;変数を変更してプログラミングすること自体をやめよう、そうすれば参照透明だよ！&#8221;</em> 、というアイデアが関数型であり、Haskell なんだと思います。</div>
</div>
<p>続きはそのうち。</p>
</div>
<div class="section" id="id16">
<h4>2.3 高階関数について<a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h4>
</div>
<div class="section" id="id17">
<h4>2.4 静的型付け<a class="headerlink" href="#id17" title="このヘッドラインへのパーマリンク">¶</a></h4>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>このページ</h3>
  <ul class="this-page-menu">
    <li><a href="../sources/haskel_contents/0.WhyHaskell.txt"
           rel="nofollow">ソースコードを表示</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    モジュール、クラス、または関数名を入力してください
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../Others.html" title="雑記"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="../Study_Haskell.html" title="Study Haskell!!"
             accesskey="P">前へ</a> |</li>
        <li><a href="../index.html">memo : Linuxとかプログラミングとか</a> &raquo;</li>
          <li><a href="../Study_Haskell.html" accesskey="U">Study Haskell!!</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Sakai.
      最終更新: Oct 07, 2012
      このドキュメントは <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3 で生成しました。
    </div>
  </body>
</html>